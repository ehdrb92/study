컴퓨터에 저장되는 텍스트, 오디오, 이미지 파일들은 모두 디스크에 0과 1로 이루어진 이진 데이터로 저장된다. 그렇다면, 이를 실행하는 운영체제와 응용 프로그램은 이를 어떻게 구분하고 실행시키는가?

## 파일 형식 구분의 주요 단서: 헤더(Header)

대부분의 파일 형식은 **매직 넘버(Magic Number)**라고 불리는 고유한 시그니처 값을 파일의 **맨 앞부분(헤더)**에 기록합니다.
예를 들어:

- PNG: 89 50 4E 47 0D 0A 1A 0A
- JPEG: FF D8 FF
- PDF: %PDF-1.x
- ELF 실행 파일: 7F 45 4C 46

운영체제나 프로그램은 이 매직 넘버를 읽어 파일의 타입을 구분합니다.
이는 매우 신뢰도가 높아서, 확장자명이 잘못되어 있어도 프로그램이 올바른 형식을 판별할 수 있습니다.

## 헤더 외에 구분 수단

(1) 파일 확장자 (Extension)

운영체제 수준에서는 가장 단순한 방식이죠.
Windows나 macOS는 example.mp3처럼 확장자를 보고 우선적으로 파일을 어떤 프로그램으로 열지 판단합니다.
다만 확장자는 사용자 편의용 메타데이터에 불과하므로, 잘못된 확장자를 붙여도 내용은 그대로 남습니다.

(2) 파일시스템 메타데이터

파일시스템(예: NTFS, ext4, APFS 등)은 각 파일에 대해 별도의 **메타데이터 블록(inode)**을 저장합니다.
이 안에는 다음과 같은 정보가 포함됩니다:

- 파일의 크기, 생성/수정 시간
- 접근 권한 (read/write/execute)
- 파일 속성 (일반 파일, 디렉터리, 심볼릭 링크 등)

일부 시스템에서는 MIME 타입 힌트도 저장할 수 있음 (특히 macOS의 HFS+나 APFS, 그리고 Linux의 GVFS)

이러한 정보는 파일의 실제 내용과는 별개로, 운영체제가 파일을 다루는 데 참고합니다.

(3) 외부 인덱싱 시스템

특정 환경에서는 OS가 파일 내용의 일부를 스캔하여 MIME 타입 데이터베이스를 만들어 둡니다.
예:

Linux의 file 명령은 /usr/share/mime/magic DB를 이용해 헤더 패턴을 분석합니다.

macOS는 “Uniform Type Identifier (UTI)” 시스템을 사용해 확장자 + 매직넘버를 함께 고려합니다.

## 응용 프로그램의 추가 식별 과정

특정 응용 프로그램(예: Photoshop, Audacity, ffmpeg 등)은 단순히 매직 넘버만 보는 게 아니라,
파일 내부의 헤더 구조 전체를 분석해 세부 포맷을 구분합니다.
예를 들어 WAV 파일도 내부의 ‘RIFF’ 구조 안에 “PCM”, “IEEE_FLOAT” 등 서브포맷이 명시되어 있습니다.