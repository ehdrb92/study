PostgreSQL에서 json과 jsonb 타입의 차이점을 알아보자.

## 저장 방식

- json: 입력된 문자열을 그대로 저장합니다. 즉, 저장 시 구조적 검증은 하지만, 데이터는 "텍스트 그대로" 남습니다.
- jsonb: 저장 시 파싱해서 바이너리 형태로 변환합니다. 이 과정에서 공백, 키 순서 같은 불필요한 요소는 제거됩니다.

## 조회 및 연산 성능

- json: 데이터를 꺼낼 때마다 문자열을 다시 파싱해야 하므로 검색, 조건문, 인덱싱에서 비효율적입니다.
- jsonb: 내부적으로 파싱된 구조를 저장하므로 검색과 연산이 훨씬 빠릅니다. GIN 인덱스 같은 고급 인덱스를 적용할 수 있어 대량 데이터 조회에 적합합니다.

## 데이터 보존 특성

- json: 입력한 JSON 그대로 보존됩니다. 예시로 {"a":1, "b":2}와 {"b":2, "a":1} → json에서는 원래 입력한 순서와 공백까지 유지됩니다.
- jsonb: 키 순서나 공백은 사라집니다. 예시로 {"a":1, "b":2}와 {"b":2, "a":1} → jsonb에서는 동일한 값으로 간주됩니다.

## 인덱스 활용

- json: 일반 B-Tree 인덱스만 사용할 수 있고, 활용성이 낮음.
- jsonb: GIN / GiST 인덱스를 활용해 특정 키나 값에 대한 빠른 검색이 가능.

## 추천 사용 시나리오

- json:
    원본 JSON 문자열을 그대로 보존해야 하는 경우 (예: 로그 저장, 원문 그대로 백업).
    빈번한 조회나 검색이 필요하지 않은 경우.

- jsonb:
    JSON 내부 값을 자주 조회하거나 조건 검색이 필요한 경우.
    대량 데이터에서 성능 최적화가 필요한 경우 (예: API 서버 응답 캐싱, 동적 속성 저장).