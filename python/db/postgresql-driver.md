python에서 postgresql에 연결하여 SQL문을 수행하는 대표적인 드라이버들이 존재한다.

첫 번째 `psycopg2`이다. python에서 postgresql에 연결 시 가장 많이 사용되며, 사실상 표준으로 자리잡았다.

- postgresql만을 위해 설계되었으며, 다양한 기능을 네이티브로 지원한다.
- 데이터베이스에 대한 영구적인 연결(세션)을 생성하고 재사용할 수 있다.
- 애플리케이션 수준의 커서를 통해 대량의 데이터를 쿼리할 수 있다.
- COPY, COPY FROM 명령을 사용할 수 있다.
- NOTIFY 메시지를 수신할 수 있다.
- python, postgresql 간의 데이터 형식을 자동으로 변환하며, 사용자 지정 변환도 지원한다.
- 초당 수천 겅의 트랙잭션을 지원하여 고부하 환경에서 효율적이다.
- 메모리 오버헤드가 낮다.
- 동시성 환경에서 뛰어난 성능을 발휘한다.
- 사용하는 환경에 설치된 postgresql의 일부 네이티브 파일에 의존하기 때문에 운영체제와 아키텍처 환경에 따라 배포가 어려울 수 있다.
- cpython2에 대한 지원이 종료되어 python2에서 사용은 힘들 수 있다.
- 비동기 지원은 최소한에 그치기 때문에, 비동기 작업을 위해서는 사실상 다른 라이브러리의 추가가 필요하다.

두 번째는 `asyncpg`이다. postgresql을 비동기 프레임워크(fastapi)와 함께 사용하기 위해 설계된 라이브러리이다.

- 이진 프로토콜을 사용하며 postgresql에서 최상의 성능을 발휘하도록 설계됨.
- 쿼리 성능 향상을 위한 캐싱을 지원.
- 최신 웹 애플리케이션 및 서비스에서 논블로킹 작업이 필요한 경우 python의 async/await 구문을 완벽하게 활용 가능하다.
- 연결 풀링을 지원한다.
- 비동기 트랜잭션 지원한다.
- 매초 수 천건의 쿼리를 처리한다.
- 논블로킹 덕분에 지연 시간이 짧은 응답을 제공할 수 있다.
- python asyncio 프레임워크와 밀접하게 연관되어 있어 멀티 스레딩 혹은 멀티 프로세싱과 같은 다른 동시성 모델을 사용하는 프로젝트에 사용이 제한될 수 있다.
- 비동기이기 때문에 디버깅에 어려움을 겪을 수 있다.

세 번째는 `pg8000`이다. psycopg2와 굉장히 유사한 사용방식을 가지고 있지만, 다른 점은 순수 python으로만 작성된 도구라는 점이다.

- python 데이터베이스 API 사양 v2.0을 따른다.
- 최소한의 기능을 제공하지만, JSON, array, hstore 등 주요 postgresql은 일부 지원한다.
- ssl 연결을 지원한다.
- python 런타임이 실행될 수 있는 환경이라면 어디서든 실행가능하다. psycopg2와 다르게 배포가 간단하다.

네 번째는 `sqlalchemy`이다. python을 위한 매우 많은 기능을 담은 완벽한 SQL 도구이자 ORM 라이브러리이다. 추상적인 데이터베이스 연산 및 상호작용을 고수준에서 처리하므로 데이터베이스를 관리하고 활용하기 매우 편하다. 또한 postgresql에 국한되지 않고 다양한 관계형 데이터베이스 서버와 연결하고 사용에 용이하다.

- 고수준의 ORM과 저수준의 SQL 표현 언어 사용 전부를 제공한다.
- postgresql, mysql, sqlite, oracle 등 다양한 데이터베이스를 지원한다.
- sql 문을 python 프로그래밍 언어 방식으로 생성할 수 있다.
- sql 문을 통해 데이터베이스 객체를 직접 정의하지 않고, python class로 데이터베이스에 매핑할 수 있다.
- 트랜잭션을 지원하고, 작업 단위 및 ID 맵 패턴을 통해 데이터 무결성을 보장한다.
- orm을 사용 시 일반적으로 원시 sql이나 core를 사용하는 것보다 오버헤드가 크다.
- 배치 작업은 orm 사용 시 세션 flush를 조정하는 배치 처리 기법을 통해 최적화해야 한다.
- orm 사용 시 복잡한 sql에 대한 최적화가 상대적으로 어렵다.