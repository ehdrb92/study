aws lambda의 경우 특정 계정에 리전 별로 동시성 요청의 최대 개수를 1000개로 제한하고 있다. 이 말은 즉 동시에 처리되는 요청은 최대 1000개까지 밖에 처리할 수 없다는 것이다.

물론 aws 측에 문의하여 상황을 설명 후 승낙을 받으면 제한 수를 늘릴 수 있다고 한다.


## 동시성 관련 1

만약 lambda 함수 A와 B가 예약되지 않은 동일한 동시성 한도를 공유할 경우에 있다고 가정해보자. 여기서 사용가능한 동시성이 100개 인데, 함수 A가 100개의 동시성을 사용 후 당장 사용은 안하지만 종료가 아닌 동결 상태에 있다. 여기서 동결 상태는 warm start가 가능한 상태이다.

이때 함수 B가 실행된다면 해당 호출은 쓰로틀이 걸리지 않는가?

결론적으로 걸리지 않는다. 동시성은 실제로 실행 중인 상태를 기준으로한 수치이지 특정 함수가 현재 동작 혹은 동결 상태로서 초기화된 인스턴스의 수치를 말하는게 아니다.

만약 함수 A에 동작 중인 90개의 인스턴스와 10개의 동결 인스턴스가 있다면 동시성은 90개를 사용 중이다. 여기서 함수 B가 10개의 동시성을 사용한다면, 동시성은 100개로 제한에 걸리지 않게된다. 또한 함수 A의 동결 인스턴스도 동결 유지 기한이 지나지 않았다면, 실행 환경이 정리되지는 않는다. 순간적으로 총 110개의 초기화된 인스턴스가 존재하는 것이다.

만약 내부 전체 시스템 실행 환경의 메모리가 부족하면 가장 오래된 동결 실행 환경부터 자동으로 정리된다고 한다.